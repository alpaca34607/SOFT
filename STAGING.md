# Staging Environment - è»Ÿç­‹ç”Ÿç‰©é è³¼ç³»çµ±

## ğŸŒ¿ Staging ç’°å¢ƒèªªæ˜

é€™æ˜¯è»Ÿç­‹ç”Ÿç‰©é è³¼ç³»çµ±çš„æ¸¬è©¦ç’°å¢ƒï¼Œç”¨æ–¼ï¼š
- åŠŸèƒ½æ¸¬è©¦å’Œé©—è­‰
- æ–°åŠŸèƒ½çš„é è¦½
- å®¢æˆ¶æ¼”ç¤º
- ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²å‰çš„æœ€çµ‚æ¸¬è©¦

## ğŸš€ éƒ¨ç½²æ–¹å¼

### æ–¹æ¡ˆ 1: Vercel (æ¨è–¦)

1. **å»ºç«‹ Vercel å°ˆæ¡ˆ**
   - å°ˆæ¡ˆåç¨±ï¼š`soft-bio-staging`
   - åˆ†æ”¯ï¼š`staging`
   - é…ç½®æª”æ¡ˆï¼š`vercel-staging.json`

2. **ç’°å¢ƒè®Šæ•¸è¨­å®š**
   ```
   NODE_ENV=staging
   ```

3. **è‡ªå‹•éƒ¨ç½²**
   - æ¯æ¬¡æ¨é€åˆ° `staging` åˆ†æ”¯æ™‚è‡ªå‹•éƒ¨ç½²
   - éƒ¨ç½² URLï¼š`https://soft-bio-staging.vercel.app`

### æ–¹æ¡ˆ 2: Railway

1. **å»ºç«‹ Railway å°ˆæ¡ˆ**
   - å°ˆæ¡ˆåç¨±ï¼š`soft-bio-staging`
   - åˆ†æ”¯ï¼š`staging`
   - é…ç½®æª”æ¡ˆï¼š`railway-staging.json`

2. **ç’°å¢ƒè®Šæ•¸è¨­å®š**
   ```
   NODE_ENV=staging
   PORT=3000
   ```

### æ–¹æ¡ˆ 3: Render

1. **å»ºç«‹ Render æœå‹™**
   - æœå‹™åç¨±ï¼š`soft-bio-staging`
   - åˆ†æ”¯ï¼š`staging`
   - é…ç½®æª”æ¡ˆï¼š`render-staging.yaml`

2. **ç’°å¢ƒè®Šæ•¸è¨­å®š**
   ```
   NODE_ENV=staging
   PORT=10000
   ```

## ğŸ“Š ç’°å¢ƒå·®ç•°

| é …ç›® | Production | Staging |
|------|------------|---------|
| è³‡æ–™åº« | PostgreSQL | SQLite |
| æ—¥èªŒç­‰ç´š | info | debug |
| é™¤éŒ¯æ¨¡å¼ | é—œé–‰ | é–‹å•Ÿ |
| CORS | é™åˆ¶ | é–‹æ”¾ |
| å¿«å– | é–‹å•Ÿ | é—œé–‰ |

## ğŸ”„ å·¥ä½œæµç¨‹

### 1. é–‹ç™¼æµç¨‹
```
feature-branch â†’ staging â†’ main â†’ production
```

### 2. éƒ¨ç½²æµç¨‹
1. é–‹ç™¼å®Œæˆå¾Œåˆä½µåˆ° `staging` åˆ†æ”¯
2. è‡ªå‹•éƒ¨ç½²åˆ° staging ç’°å¢ƒ
3. åœ¨ staging ç’°å¢ƒæ¸¬è©¦
4. æ¸¬è©¦é€šéå¾Œåˆä½µåˆ° `main` åˆ†æ”¯
5. éƒ¨ç½²åˆ° production ç’°å¢ƒ

### 3. åˆ†æ”¯ç®¡ç†
- `main`: ç”Ÿç”¢ç’°å¢ƒåˆ†æ”¯
- `staging`: æ¸¬è©¦ç’°å¢ƒåˆ†æ”¯
- `backend_feat_picture`: åŠŸèƒ½é–‹ç™¼åˆ†æ”¯
- `dev_backend`: å¾Œç«¯é–‹ç™¼åˆ†æ”¯

## ğŸ› ï¸ æœ¬åœ°é–‹ç™¼

### å•Ÿå‹• Staging ç’°å¢ƒ
```bash
# åˆ‡æ›åˆ° staging åˆ†æ”¯
git checkout staging

# å®‰è£ä¾è³´
cd backend && npm install

# å•Ÿå‹•æœå‹™
npm start
```

### ç’°å¢ƒè®Šæ•¸
ä½¿ç”¨ `env.staging` æª”æ¡ˆä¸­çš„é…ç½®

## ğŸ“ æ³¨æ„äº‹é …

1. **è³‡æ–™åº«**: Staging ç’°å¢ƒä½¿ç”¨ SQLiteï¼Œè³‡æ–™å¯èƒ½éºå¤±
2. **å®‰å…¨æ€§**: ä¸è¦åœ¨æ­¤ç’°å¢ƒä½¿ç”¨çœŸå¯¦çš„æ•æ„Ÿè³‡æ–™
3. **æ•ˆèƒ½**: æ­¤ç’°å¢ƒå¯èƒ½æ¯”ç”Ÿç”¢ç’°å¢ƒæ…¢
4. **å‚™ä»½**: å®šæœŸå‚™ä»½ staging ç’°å¢ƒçš„è³‡æ–™

## ğŸ”— ç›¸é—œé€£çµ

- [Production Environment](../README.md)
- [Deployment Guide](../DEPLOYMENT.md)
- [API Documentation](../backend/README.md)

## ğŸ“ æ”¯æ´

å¦‚æœ‰å•é¡Œï¼Œè«‹è¯ç¹«é–‹ç™¼åœ˜éšŠæˆ–å»ºç«‹ Issueã€‚
